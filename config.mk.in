# HaskellDB configuration file. configure will produce config.mk from this file
# @configure_input@

PACKAGE_VERSION = @PACKAGE_VERSION@

GHC = @GHC@
GHCI = @GHCI@
GHC_PKG = @GHC_PKG@
GHCFLAGS = @GHCFLAGS@
GHC_DIR = @GHC_DIR@

HUGS = @HUGS@
RUNHUGS = @RUNHUGS@
HUGSFLAGS = @HUGSFLAGS@
HUGS_DIR = @HUGS_DIR@

HADDOCK = @HADDOCK@

WIN32=@WIN32@
AR = @AR@
LD = @LD@
INSTALL = @INSTALL@
LDFLAGS = @LDFLAGS@

#
# Which compilers to build libraries for
#

ENABLE_GHC = @ENABLE_GHC@
ENABLE_HUGS = @ENABLE_HUGS@

ifeq "$(ENABLE_GHC)" "yes"
COMPILERS += ghc
endif

ifeq "$(ENABLE_HUGS)" "yes"
COMPILERS += hugs
endif

#
# HSQL, unixODBC, MySQL, PostgreSQL stuff
#


WITH_HSQL_ODBC = @WITH_HSQL_ODBC@
WITH_HSQL_MYSQL = @WITH_HSQL_MYSQL@
WITH_HSQL_POSTGRESQL = @WITH_HSQL_POSTGRESQL@

ifeq "$(WITH_HSQL_ODBC)" "yes"
HSQL_DRIVERS += ODBC
endif

ifeq "$(WITH_HSQL_MYSQL)" "yes"
HSQL_DRIVERS += MySQL
endif

ifeq "$(WITH_HSQL_POSTGRESQL)" "yes"
HSQL_DRIVERS += PostgreSQL
endif

ifneq ($(strip $(HSQL_DRIVERS)),)
DRIVERS += HSQL
endif

#
# Include local HaskellDB dirs
#

SRC_DIR = $(TOP_DIR)/src

BUILD_DIR = $(TOP_DIR)/build

GHCFLAGS += $(addprefix -i, $(BUILD_DIR))
HUGSFLAGS += $(patsubst %, -P%:, $(BUILD_DIR))
# order is significant here
LDFLAGS := -L$(BUILD_DIR) -lHShdb $(LDFLAGS)
